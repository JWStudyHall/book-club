<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Book Club</title>
  </head>
  <body>
    <%- include("../partials/nav.ejs") %>

    <div>
      <h2><%= club.title %></h2>
      <img src="<%= club.book.image %>" alt="<%= club.book.title %>" style="width:200px; height:auto; object-fit:cover; display:block;"/>
    </div>

    <% if( user._id === String(club.owner)){ %>
      <form action="/clubs/<%= club._id %>?_method=DELETE" method="POST">
        <button type="submit">Delete Club</button>
      </form>
    <% } %>
    <div>
      <h2>Members</h2>
      <form action="/clubs/<%= club._id %>/addmember?_method=PUT" method="POST">
        <button type="submit">Join</button>
      </form>

      <div>
        <% club.members.forEach((member)=>{ %>
            <img src="<%= member.avatar %>" alt="<%= member.username %>" style="width:100px; height:100px; border-radius:50%; object-fit:cover; display:block;">
            <p><%= member.username %></p>
        <% }) %>
      </div>
    </div>
  </body>
</html>
